<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

<dom-module id="deep-configuration">
  <!-- TODO Handle additional config file types -->
  <iron-ajax
    auto
    url="[[filePath]]"
    handle-as="json"
    on-response="__handleConfigFile"
  ></iron-ajax>
  <script>
    /**
     * `deep-configuration`
     * Polymer component providing access to configuration throughout an application.
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class DeepConfiguration extends Polymer.Element {
      static get is() { return 'deep-configuration'; }
      static get properties() {
        return {
          /* Path to the configuration file */
          filePath: {
            type: String,
            value: './config.json'
          }
        };
      }
      __handleConfigFile(request) {
        const {response} = request;
        if (!response) return {};
        debugger;
      }
    }

    window.customElements.define(DeepConfiguration.is, DeepConfiguration);
  </script>
</dom-module>
